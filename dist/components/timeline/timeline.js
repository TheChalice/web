angular.module("console.timeline",[{files:["components/timeline/timeline.css"]}]).directive("cTimeline",[function(){return{restrict:"EA",replace:!0,scope:{data:"="},templateUrl:"components/timeline/timeline.html",controller:["$scope","$log","Build","Confirm","$stateParams",function(e,t,n,r,i){e.buildLog={},e.collapseLog={},e.getLog=function(r){var i=e.data.items[r],s=i.metadata.name;e.collapseLog[s]=!e.collapseLog[s];if(i.status.phase=="Pending")return;if(e.buildLog[s])return;n.log.get({name:s},function(t){var n="";for(var r in t)n+=t[r];e.buildLog[s]=n},function(e){t.info("err",e)})},e.delete=function(i){var s=e.data.items[i].metadata.name;r.open("删除构建","您确定要删除项目吗?","删除项目将清除项目的所有历史数据以及相关的镜像该操作不能被恢复","recycle").then(function(){n.remove({name:s},function(){t.info("deleted");for(var n=0;n<e.data.items.length;n++)s==e.data.items[n].metadata.name&&e.data.items.splice(n,1)},function(e){t.info("err",e)})})},e.stop=function(n){var r=e.data.items[n].metadata.name;t.info("stop build"+r)}}]}}]);