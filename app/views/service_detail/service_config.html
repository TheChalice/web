<div class="service-config">
    <h2>基础配置</h2>
    <hr>

    <h3>POD配置&nbsp;<span class="require"></span>
        <a href="javascript:;" class="href-add" ng-click="addContainer()">
            <i class="fa fa-plus-circle fa-lg"></i>&nbsp;&nbsp;添加容器
        </a>
    </h3>

    <div ng-repeat="container in dc.spec.template.spec.containers" ng-class="{'bg-gray': true}">
        <div class="container-fluid container-bar">
            <div class="row">
                <div class="col-sm-6">
                     {{container.name}}
                </div>
                <div class="col-sm-6 text-right">
                    <a class="icon25 icon25-collapse" ng-click="container.show = !container.show" uib-tooltip="查看" href="javascript:;"></a>
                    <a class="faa faa-times" ng-click="rmContainer($index)" uib-tooltip="删除" href="javascript:;"></a>
                </div>
            </div>
        </div>

        <div uib-collapse="!container.show" class="container-box">
            <div style="margin-bottom: 20px;" ng-if="container.new">
                <h4>设置容器名称</h4>
                <input ng-model="container.name" style="width: 300px;display: inline-block;" type="text" class="form-control" placeholder="请设置容器名称"><span class="require"></span>
            </div>
            <div style="margin-bottom: 20px;">
                <a href="javascript:;" class="btn btn-orange">选择镜像</a><span class="require"></span>
            </div>
            <div style="font-size: 12px;color: #5a6378;">
                <div ng-if="container.image">
                    <p style="margin-bottom: 5px;">镜像名称:&nbsp;{{container.image | imageStreamName}}</p>
                    <p style="margin-bottom: 30px;">镜像版本:&nbsp;{{container.image | stripSHAPrefix | limitTo: 7}}</p>
                </div>

                <h4>挂载secret卷&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:;" class="fa fa-plus-circle fa-lg href-add">&nbsp;&nbsp;创建</a></h4>

                <div class="secret-bar" ng-repeat="vm in container.volumeMounts">
                    <div class="dropdown dropdown-select" style="width: 200px;margin: 0 15px 15px 0;">
                        <button class="btn dropdown-toggle" data-toggle="dropdown">
                            <span>{{vm.name || '请选择'}}</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                            <li ng-repeat="s in secrets.items">
                                <a href="javascript:;" ng-click="vm.name = s.metadata.name">{{s.metadata.name}}</a>
                            </li>
                        </ul>
                    </div>
                    <input ng-model="vm.mountPath" style="width: 300px;display: inline-block;margin: 0 15px 15px 0;" type="text" class="form-control">
                    <a href="javascript:;" ng-click="addSecret(container.name, $index, $last)" class="fa fa-lg" ng-class="{'fa-times-circle':!$last, 'fa-plus-circle':$last}"></a>
                </div>

                <h4>容器资源限额</h4>
                <div>
                    CPU<=&nbsp;&nbsp;
                    <input type="text" class="form-control" style="width: 100px;display: inline-block;font-size: 12px;">
                    &nbsp;&nbsp;X&nbsp;&nbsp;&nbsp;
                    内存<=&nbsp;&nbsp;
                    <input type="text" class="form-control" style="width: 100px;display: inline-block;font-size: 12px;">
                    &nbsp;&nbsp;GB
                </div>
            </div>
        </div>
    </div>

    <h3>端口开放&nbsp;<span class="require"></span></h3>

    <div class="table-responsive" style="margin-bottom: 30px;">
        <table class="table table-hover table-default sub-table">
            <tr>
                <th style="width: 20%;">容器名称</th>
                <th style="width: 30%">镜像</th>
                <th style="width: 50%;">端口</th>
            </tr>
            <tr ng-repeat="container in dc.spec.template.spec.containers">
                <td style="vertical-align: middle;">
                    {{container.name}}
                </td>
                <td style="vertical-align: middle;">
                    <span>
                        <p>{{container.image | imageStreamName}}</p>
                        <p>{{container.image | stripSHAPrefix | limitTo: 7}}</p>
                    </span>
                </td>
                <td style="vertical-align: middle;">
                    <div class="row">
                        <div class="col-sm-3">协议</div>
                        <div class="col-sm-3">容器端口</div>
                        <div class="col-sm-3">服务端口</div>
                        <div class="col-sm-3"></div>
                    </div>
                    <div class="row" ng-repeat="port in container.ports" style="margin-top: 15px;">
                        <div class="col-sm-3"><input type="text" readonly class="input-small" ng-model="port.protocol"></div>
                        <div class="col-sm-3"><input type="text" readonly class="input-small" ng-model="port.containerPort"></div>
                        <div class="col-sm-3"><input type="text" class="input-small"></div>
                        <div class="col-sm-3"><input type="checkbox">&nbsp;开放</div>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <h2>高级配置</h2>
    <hr>

    <div class="form-group" style="overflow:hidden;">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size:14px; text-align: left; margin-top: 30px">服务高可用</label>
        <div class="col-sm-10" style=" margin-bottom: 30px; margin-left: -10px">
            <label style="font-size: 12px; font-weight: normal;  margin-top: 35px;">POD数量</label>
            <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control">
            <hr>
            <label style="font-size: 12px; font-weight: normal; float: left; margin-top: 20px; margin-right: 30px">自动伸缩</label>
            <c-checkbox checked="checkedfirst" style="margin-top: 15px"></c-checkbox>
            <br>
            <div ng-if="checkedfirst">
                <label style="font-size: 12px; font-weight: normal;  margin-top: 35px;">资源阈值</label>
                <span style="font-size: 12px">POD最小数量  <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control"></span>
                <span style="font-size: 12px">POD最大数量  <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control"></span>
                <span style="font-size: 12px">CPU平均利用率 <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control"></span>
                <hr>
            </div>

            <label style="font-size: 12px; font-weight: normal;  margin-top: 35px;">重启策略</label>
            <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control">
        </div>
    </div>
    <hr>
    <div class="form-group" style="overflow:hidden;">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size:14px; text-align: left;">路由设置</label>
        <c-checkbox checked="checkedsecond"></c-checkbox>
        <br>
        <div class="col-sm-10" ng-if="checkedsecond" style="overflow: hidden; margin-left: 120px">
            <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size:12px;  text-align: left;">服务端口</label>
            <input name="cdm" min="1" max="10"  style="width: 80px;display: inline-block;" type="number" class="form-control">
            <span>域名<input type="text">lab.asiainfodata.com</span>
            <hr>
        </div>
    </div>
    <div class="form-group" style="overflow:hidden;">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size:14px; text-align: left;">后端服务绑定</label>
        <a href="" style="text-decoration: none"><i class=" fa fa-green fa-plus-circle"></i >创建</a>
        <div class="panel panel-default sub-panel" style="margin-top: 20px; margin-left: 145px; margin-right: 20px">
            <div class="panel-heading">
                <span class="panel-title-o" style="font-size: 12px; margin-left: 5px">后端服务设置</span>
            </div>
            <div class="panel-body">
                <div class="form-group" style="overflow:hidden">
                    <div class="tabandimage col-md-6">
                        <img style="float: left; margin-left: -15px" src="views/service_create/img/images_60.png" >
                        <p style="float: left; margin-left: 10px; margin-top: 10px">后端服务实例</p><br>
                        <p style="margin-top: 15px; margin-left: -72px; float: left">后端服务名</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="form-group" style="overflow:hidden">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size: 14px; text-align: left">环境变量设置</label>
        <a href="" style="text-decoration: none"><i class=" fa fa-green fa-plus-circle"></i >创建环境变量</a>
        <div class="panel panel-default sub-panel" style="margin-top: 20px; margin-left: 145px; margin-right: 20px">
            <div class="panel-heading">
                <span class="panel-title-o" style="font-size: 12px; margin-left: 5px">环境变量设置</span>
            </div>
            <div class="panel-body">
                <div class="form-group" style="overflow:hidden">
                    <label>健</label>
                    <input type="text">
                    <label>值</label>
                    <input type="text">
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="form-group" style="overflow:hidden">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size: 14px; text-align: left">自动部署</label>
        <input type="checkbox">
        <labe>镜像变化触发自动部署</labe>
    </div>
    <hr>
    <div class="form-group" style="overflow:hidden">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size: 14px; text-align: left">性能监控</label>
        <c-checkbox checked="checkedthird" style="float: left"></c-checkbox>
        <div class="col-sm-7" ng-if="checkedthird" style="overflow: hidden;word-wrap: break-word;word-break: break-all;">
            <a class="btn btn-orange col-md-3">性能监测配置</a>
        </div>
    </div>
    <hr>
    <div class="form-group" style="overflow:hidden">
        <label class="col-sm-2 control-label text-left" style="color: #5a6378; font-size: 14px; text-align: left">警告服务</label>
        <c-checkbox checked="checkedforth" style="float: left"></c-checkbox>
        <div class="col-sm-7" ng-if="checkedforth" style="overflow: hidden;word-wrap: break-word;word-break: break-all;">
            <a class="btn btn-orange col-md-3">告警服务配置</a>
        </div>
    </div>

    <button class="btn btn-orange btn-block">更新(会自动触发重新部署)</button>

    <style>
        .input-small {
            width: 70px;
            border: 1px solid #c9c9c9;
            border-radius: 2px;
        }
    </style>

</div>
