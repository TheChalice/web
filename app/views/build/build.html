<div id="build">
    <div class="row">
        <div class="col-sm-6 col-xs-4">
            <a class="btn btn-green" ui-sref="console.build_create" style="margin-right:20px;">
                <i class="fa fa-plus"></i>
                <span class="hidden-xs"> 新建构建</span>
            </a>
            <a class="btn btn-skyblue" ng-click="refresh()" style="height: 34px; width: 36px; padding: 5px 5px;">
                <i class="fa fa-refresh fa-lg"></i>
            </a>
        </div>
        <div class="col-sm-6 col-xs-8" style="padding-left: 0;">
            <div class="pull-right">
                <c-search search="search"></c-search>
            </div>
        </div>
    </div>
    <div class="table-responsive" style="margin-top: 20px;">
        <table class="table table-hover table-default">
            <tr>
                <th>构建名称</th>
                <th>最近构建状态</th>
                <th>最近构建时间</th>
                <th>最近构建时长</th>
                <th>构建类型</th>
                <th class="text-center">操作</th>
            </tr>
            <tr ng-repeat="bc in items">
                <td>
                    <a class="href-orange" ui-sref="console.build_detail({name: bc.metadata.name})">{{bc.metadata.name}}</a>
                </td>
                <td>
                    <span class="icon12 icon12-{{bc.build.status.phase}}"></span>
                    {{bc.build.status.phase | phaseFilter}}
                </td>
                <td>{{bc.build.metadata.creationTimestamp | dateRelative}}</td>
                <td>{{bc.build.status.duration | duration}}</td>
                <td>
                    <i ng-if="true" class="fa fa-hand-pointer-o">&nbsp;手动</i>
                    <i ng-if="false" class="fa fa-television">&nbsp;自动</i>
                </td>
                <td class="text-center" style="padding-right: 30px">
                    <a class="icon25 icon25-source pull-left" href="{{bc.spec.source.git.uri}}" uib-tooltip="查看代码源" target="_blank"></a>
                    <a class="icon25 icon25-image" ng-if="bc.spec.output && bc.spec.output.to && bc.spec.output.to.name" ui-sref="console.image_detail({name: bc.spec.output.to.name})" uib-tooltip="查看镜像"></a>
                    <a class="icon25 icon25-start pull-right" href="javascript:;" ng-click="startBuild($index)" ng-if="bc.build.status.phase != 'Running'" uib-tooltip="构建"></a>
                    <a class="icon25 icon25-stop pull-right" href="javascript:;" ng-click="stop($index)" ng-if="bc.build.status.phase == 'Pendding' || bc.build.status.phase == 'Running' || bc.build.status.phase == 'New'" uib-tooltip="停止"></a>
                </td>
            </tr>
        </table>
        <div class="text-right" ng-if="grid.total > 10">
            <uib-pagination class="pagination"
                    ng-model="grid.page"
                    total-items="grid.total"
                    items-per-page="grid.size"
                    class="pagination-sm"
                    boundary-links="true"
                    max-size="12"
                    rotate="true"
                    previous-text="上一页"
                    next-text="下一页"
                    first-text="首页"
                    last-text="末页">
            </uib-pagination>
        </div>
    </div>
</div>
