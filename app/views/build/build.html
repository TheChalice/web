
<div id="build">
    <div class="service_top">这里汇聚了平台上创建的所有构建。<i class="four_question" style="display:none;"> 如何创建一个服务？</i></div>
    <!--<div class="loader" ng-show="!items">-->
    <!--<div class="loader-inner ball-clip-rotate-multiple">-->
    <!--<div></div>-->
    <!--<div></div>-->
    <!--</div>-->

    <!--</div>-->
    <div class="new-loading" ng-show="!items">
        <img style="height:30px;width:30px;margin-left:5px;" src="pub/img/logo.gif" alt=""><br>
        <span style="color:#666">加载中...</span>
    </div>
    <div>
        <div class="row" style="margin-right:0px;" >
            <div class="col-sm-4 col-xs-4 builder_jia_btn">

                <a class="btn btn-blue" ui-sref="console.build_create_new" style="margin-right:15px;border-radius:2px;" >
                    <span class="hidden-xs jia">  新建构建</span>
                </a>
                <a class="btn btn-refresh" ng-click="reload()" style="border-color:#5b73eb;display:inline-block;border-radius:2px;">
                    <span class="hidden-xs refresh">刷新</span>
                </a>




                <!--<a class="btn" ng-click="refresh()" style="background-color: #57d1ea;">-->

                <!--<i class="fa fa-refresh fa-lg"></i>&lt;!&ndash; 20160921 jia 代码构建 loading处理按钮向下问题&ndash;&gt;-->

                <!--</a>-->
            </div>
            <!--<div class="col-sm-8 col-xs-8" style="padding-left: 0; ">-->
            <!--<div class="pull-right" style="width:100%;">-->
            <div class="input-group col-sm-4 col-sm-offset-8 searchbar">
                <input type="text"
                       class="form-control"
                       placeholder="搜索构建名称"
                       ng-model="grid.txt"
                       ng-keyup=buildsearch(grid.txt)>
                <!--ng-model="txt" ng-focus="showTip=true;" -->
                    <!--<span class="input-group-btn">-->
                        <!--<a class="btn" ng-click="buildsearch('search')"></a>-->
                    <!--</span>-->
                <span class="search_public_btn" ng-click="buildsearch('search')"></span>
            </div>
            <!--</div>-->
            <!--</div>-->
        </div>
        <div class="table-responsive service" style="margin-top: 13px;min-height:220px;">
            <div class="table table-hover table-default">
                <ul class="nav_service">
                    <li>构建名称</li>
                    <li>创建时间</li>
                    <li>更新时间</li>
                    <li>
                        <div uib-dropdown on-toggle="toggled(open)" class="build_list_toggle">
                            <a href="javascript:void(0);" class="service_block" uib-dropdown-toggle>
                            <span style="color:#999;width:90px;display:block;margin:0 auto;position:relative;">状态 ({{grid.changestatus}})
                            <b class="ser_bg_btn"></b></span>

                            </a>
                            <ul class="service_drop" uib-dropdown-menu aria-labelledby="user-menu">
                                <li  ng-repeat="name in grid.status" ng-click=grid.changestatus=name.name>
                                    <a href="javascript:void(0);"><span ng-class="{colored:name.name===grid.changestatus}">{{name.name}}</span></a></li>
                            </ul>
                        </div></li>
                    <li>分支</li>
                    <li>代码源</li>
                    <li>操作</li>
                </ul>
                <!--<tr ng-repeat="bc in items">-->
                <ul class="nav_service_main" ng-repeat="bc in items" ng-show="items">
                    <li>
                        <a class="href-blue" style="margin:0 auto" ui-sref="console.build_detail({name: bc.metadata.name})" uib-tooltip="{{bc.metadata.name}}" tooltip-placement="top">
                            {{bc.metadata.name}}
                        </a>
                    </li>
                    <li>{{bc.build.metadata.creationTimestamp | dateRelative}}</li>
                    <li>{{bc.build.status.duration | duration}}</li>
                    <li> {{bc.build.status.phase | phaseFilter}}</li>
                    <li>{{bc.build.spec.source.git.ref || 'latest'}}</li>
                    <li>
                        <div class="code_source"><i class="b_github"></i><span class="b_github_tit">查看</span></div>
                        <div class="build_num_detail" ng-mouseout="copyBlur($event)">
                            <a href="{{bc.spec.source.git.uri}}" target="_blank" class="buid_num_url in_nowrap">{{bc.spec.source.git.uri}}</a>
                            <span class="build_num_copy" ng-class="{'iscopyactive':isCopy}" ng-click="copyContent($event)" >{{copyCon}}</span>
                        </div>
                    </li>
                    <li>
                        <a class="href-blue" ng-if="bc.spec.output && bc.spec.output.to && bc.spec.output.to.name"
                           ng-show="bc.build.status.phase !== 'Failed'"
                           ui-sref="console.image_detail({bc: bc.metadata.name, name: bc.spec.output.to.name})"
                        >查看镜像</a>
                        <a class = "href-blue" style="margin-right:8px;margin-left:8px;" ng-click="startBuild($index)" ng-show="bc.build.status.phase != 'Running'" href="javascript:;">构建</a>
                        <a class = "href-blue" style="margin-right:8px;margin-left:8px;" ng-click="stop($index)" ng-show="bc.build.status.phase == 'Running'" href="javascript:;">停止</a>
                        <a class = "href-blue" style="margin-right:0px;" ng-click="deletes(bc,$index)"  href="javascript:;">删除</a>

                    </li>
                </ul>

                <ul ng-if="items.length===0" class="service_block_blank">
                    <li style="text-align: center;background: #fff;position:relative;"><p class="blank_block"><span class="blank_tit"> 没有构建实例。<a  class = "href-blue" href="javascript:void(0)" ui-sref="console.build_create_new">去创建！</a></span></p></li>
                </ul>
            </div>
            <div style="margin-top:20px;float:left;" style="display:none;" ng-show="items">
                <span class="servie_page_num">第 {{grid.page}} 页，共 {{grid.total}} 项</span>
            </div>
            <div class="text-right service_page_uib" ng-if="grid.total > 0">
                <uib-pagination class="pagination"
                                ng-model="grid.page"
                                total-items="grid.total"
                                items-per-page="grid.size"
                                class="pagination-sm"
                                boundary-links="true"
                                direction-links="false"
                                max-size="12"
                                rotate="true"
                                previous-text="上一页"
                                next-text="下一页"
                                first-text="首页"
                                last-text="尾页">
                </uib-pagination>
            </div>

        </div>
    </div>

</div>
<style>
    #build .icon25 {
        margin: 0 18px;
    }

    .table-responsive .buildname {
        overflow: hidden;
        word-break: break-all;
        word-wrap: break-word;

    }

    @media screen and (max-width: 1250px) {
        #build .icon25 {
            margin: 0 18px;
        }
    }

</style>
